Testsuite: library.test.NewsletterSenderAsyncTest
Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 15,585 sec
------------- Standard Output ---------------
Hibernate: select subscriber0_.id_su as id1_28_, subscriber0_.avatar_su as avatar2_28_, subscriber0_.blacklisted_su as blacklis3_28_, subscriber0_.booking_nb_su as booking4_28_, subscriber0_.confirmed_su as confirmed5_28_, subscriber0_.created_su as created6_28_, subscriber0_.email_su as email7_28_, subscriber0_.login_su as login8_28_, subscriber0_.password_su as password9_28_, subscriber0_.revival_su as revival10_28_ from subscriber subscriber0_ where datediff(subscriber0_.created_su, curdate())=? and subscriber0_.confirmed_su=? and subscriber0_.revival_su<?
Hibernate: select admin0_.id_ad as id1_0_0_, admin0_.created_ad as created2_0_0_, admin0_.email_ad as email3_0_0_, admin0_.is_admin_ad as is4_0_0_, admin0_.last_logged_ad as last5_0_0_, admin0_.login_ad as login6_0_0_, admin0_.password_ad as password7_0_0_, admin0_.role_ad as role8_0_0_ from admin admin0_ where admin0_.id_ad=?
Hibernate: select count(newsletter0_.id_ne) as col_0_0_ from newsletter newsletter0_ where newsletter0_.state_ne<? and newsletter0_.send_ne<? order by newsletter0_.send_ne ASC
Hibernate: select newsletter0_.id_ne as id1_13_, newsletter0_.admin_id_ad as admin8_13_, newsletter0_.created_ne as created2_13_, newsletter0_.preferencies_ne as preferen3_13_, newsletter0_.send_ne as send4_13_, newsletter0_.state_ne as state5_13_, newsletter0_.text_ne as text6_13_, newsletter0_.title_ne as title7_13_ from newsletter newsletter0_
All newsletters SSS []
=> Found [] newsletters to send
Hibernate: insert into newsletter (admin_id_ad, created_ne, preferencies_ne, send_ne, state_ne, text_ne, title_ne) values (?, ?, ?, ?, ?, ?, ?)
Newsletter was added Newsletter [id = 38, admin = Admin [id : 1, login : admin, email : bartkonieczny@yahoo.fr, created : 2012-12-26 18:12:51.0, lastLogged : 2013-01-17 12:48:41.0, role : SUBSCRIBER_ADD,SUBSCRIBER_EDIT], title = Test #1,text =Test #1 body, created =Fri Apr 26 13:05:10 CEST 2013, state =0, sendTime = Sat Mar 30 13:05:10 CET 2013]
Hibernate: select newsletter0_.id_ne as id1_13_, newsletter0_.admin_id_ad as admin8_13_, newsletter0_.created_ne as created2_13_, newsletter0_.preferencies_ne as preferen3_13_, newsletter0_.send_ne as send4_13_, newsletter0_.state_ne as state5_13_, newsletter0_.text_ne as text6_13_, newsletter0_.title_ne as title7_13_ from newsletter newsletter0_
All newsletters  [Newsletter [id = 38, admin = Admin [id : 1, login : admin, email : bartkonieczny@yahoo.fr, created : 2012-12-26 18:12:51.0, lastLogged : 2013-01-17 12:48:41.0, role : SUBSCRIBER_ADD,SUBSCRIBER_EDIT], title = Test #1,text =Test #1 body, created =Fri Apr 26 13:05:10 CEST 2013, state =0, sendTime = Sat Mar 30 13:05:10 CET 2013]]
Hibernate: insert into newsletter_subscriber (date_ns, email_ns, password_ns, state_ns, subscriber_id_su) values (?, ?, ?, ?, ?)
NewsletterSubscriber was added NewsletterSubscriber [id = 360, subscriber = null,email =bartkonieczny+33333@gmail.com, password =bartkonieczny+33333@gmail.com, created =Fri Apr 26 13:05:10 CEST 2013]
Hibernate: insert into newsletter_subscriber (date_ns, email_ns, password_ns, state_ns, subscriber_id_su) values (?, ?, ?, ?, ?)
NewsletterSubscriber was added NewsletterSubscriber [id = 361, subscriber = null,email =bartkonieczny+33332@gmail.com, password =bartkonieczny+33332@gmail.com, created =Fri Apr 26 13:05:10 CEST 2013]
Hibernate: insert into newsletter_subscriber (date_ns, email_ns, password_ns, state_ns, subscriber_id_su) values (?, ?, ?, ?, ?)
NewsletterSubscriber was added NewsletterSubscriber [id = 362, subscriber = null,email =bartkonieczny+33331@gmail.com, password =bartkonieczny+33331@gmail.com, created =Fri Apr 26 13:05:10 CEST 2013]
Hibernate: insert into newsletter_subscriber (date_ns, email_ns, password_ns, state_ns, subscriber_id_su) values (?, ?, ?, ?, ?)
NewsletterSubscriber was added NewsletterSubscriber [id = 363, subscriber = null,email =bartkonieczny+33330@gmail.com, password =bartkonieczny+33330@gmail.com, created =Fri Apr 26 13:05:10 CEST 2013]
Hibernate: insert into newsletter_subscriber (date_ns, email_ns, password_ns, state_ns, subscriber_id_su) values (?, ?, ?, ?, ?)
NewsletterSubscriber was added NewsletterSubscriber [id = 364, subscriber = null,email =bartkonieczny+33329@gmail.com, password =bartkonieczny+33329@gmail.com, created =Fri Apr 26 13:05:10 CEST 2013]
Hibernate: insert into newsletter_subscriber (date_ns, email_ns, password_ns, state_ns, subscriber_id_su) values (?, ?, ?, ?, ?)
NewsletterSubscriber was added NewsletterSubscriber [id = 365, subscriber = null,email =bartkonieczny+33328@gmail.com, password =bartkonieczny+33328@gmail.com, created =Fri Apr 26 13:05:10 CEST 2013]
Hibernate: insert into newsletter_subscriber (date_ns, email_ns, password_ns, state_ns, subscriber_id_su) values (?, ?, ?, ?, ?)
NewsletterSubscriber was added NewsletterSubscriber [id = 366, subscriber = null,email =bartkonieczny+33327@gmail.com, password =bartkonieczny+33327@gmail.com, created =Fri Apr 26 13:05:10 CEST 2013]
Hibernate: insert into newsletter_subscriber (date_ns, email_ns, password_ns, state_ns, subscriber_id_su) values (?, ?, ?, ?, ?)
NewsletterSubscriber was added NewsletterSubscriber [id = 367, subscriber = null,email =bartkonieczny+33326@gmail.com, password =bartkonieczny+33326@gmail.com, created =Fri Apr 26 13:05:10 CEST 2013]
Hibernate: insert into newsletter_subscriber (date_ns, email_ns, password_ns, state_ns, subscriber_id_su) values (?, ?, ?, ?, ?)
NewsletterSubscriber was added NewsletterSubscriber [id = 368, subscriber = null,email =bartkonieczny+33325@gmail.com, password =bartkonieczny+33325@gmail.com, created =Fri Apr 26 13:05:10 CEST 2013]
Hibernate: insert into newsletter_subscriber (date_ns, email_ns, password_ns, state_ns, subscriber_id_su) values (?, ?, ?, ?, ?)
NewsletterSubscriber was added NewsletterSubscriber [id = 369, subscriber = null,email =bartkonieczny+33324@gmail.com, password =bartkonieczny+33324@gmail.com, created =Fri Apr 26 13:05:10 CEST 2013]
Hibernate: insert into newsletter_subscriber (date_ns, email_ns, password_ns, state_ns, subscriber_id_su) values (?, ?, ?, ?, ?)
NewsletterSubscriber was added NewsletterSubscriber [id = 370, subscriber = null,email =bartkonieczny+33323@gmail.com, password =bartkonieczny+33323@gmail.com, created =Fri Apr 26 13:05:10 CEST 2013]
Hibernate: insert into newsletter_subscriber (date_ns, email_ns, password_ns, state_ns, subscriber_id_su) values (?, ?, ?, ?, ?)
NewsletterSubscriber was added NewsletterSubscriber [id = 371, subscriber = null,email =bartkonieczny+33322@gmail.com, password =bartkonieczny+33322@gmail.com, created =Fri Apr 26 13:05:10 CEST 2013]
Launched tests for sending newsletter at Fri Apr 26 13:05:10 CEST 2013
Hibernate: select count(newsletter0_.id_ne) as col_0_0_ from newsletter newsletter0_ where newsletter0_.state_ne<? and newsletter0_.send_ne<? order by newsletter0_.send_ne ASC
Hibernate: select newsletter0_.id_ne as id1_13_, newsletter0_.admin_id_ad as admin8_13_, newsletter0_.created_ne as created2_13_, newsletter0_.preferencies_ne as preferen3_13_, newsletter0_.send_ne as send4_13_, newsletter0_.state_ne as state5_13_, newsletter0_.text_ne as text6_13_, newsletter0_.title_ne as title7_13_ from newsletter newsletter0_ where newsletter0_.state_ne<? and newsletter0_.send_ne<? order by newsletter0_.send_ne ASC limit ?
Hibernate: select newsletter0_.id_ne as id1_13_, newsletter0_.admin_id_ad as admin8_13_, newsletter0_.created_ne as created2_13_, newsletter0_.preferencies_ne as preferen3_13_, newsletter0_.send_ne as send4_13_, newsletter0_.state_ne as state5_13_, newsletter0_.text_ne as text6_13_, newsletter0_.title_ne as title7_13_ from newsletter newsletter0_
All newsletters SSS [Newsletter [id = 38, admin = Admin [id : 1, login : admin, email : bartkonieczny@yahoo.fr, created : 2012-12-26 18:12:51.0, lastLogged : 2013-01-17 12:48:41.0, role : SUBSCRIBER_ADD,SUBSCRIBER_EDIT], title = Test #1,text =Test #1 body, created =Fri Apr 26 13:05:10 CEST 2013, state =0, sendTime = Sat Mar 30 13:05:10 CET 2013]]
=> Found [Newsletter [id = 38, admin = Admin [id : 1, login : admin, email : bartkonieczny@yahoo.fr, created : 2012-12-26 18:12:51.0, lastLogged : 2013-01-17 12:48:41.0, role : SUBSCRIBER_ADD,SUBSCRIBER_EDIT], title = Test #1,text =Test #1 body, created =Fri Apr 26 13:05:10 CEST 2013, state =0, sendTime = Sat Mar 30 13:05:10 CET 2013]] newsletters to send
=> Found Newsletter to send Newsletter [id = 38, admin = Admin [id : 1, login : admin, email : bartkonieczny@yahoo.fr, created : 2012-12-26 18:12:51.0, lastLogged : 2013-01-17 12:48:41.0, role : SUBSCRIBER_ADD,SUBSCRIBER_EDIT], title = Test #1,text =Test #1 body, created =Fri Apr 26 13:05:10 CEST 2013, state =0, sendTime = Sat Mar 30 13:05:10 CET 2013]
Hibernate: select newsletter0_.id_ns as id1_19_, newsletter0_.date_ns as date2_19_, newsletter0_.email_ns as email3_19_, newsletter0_.password_ns as password4_19_, newsletter0_.state_ns as state5_19_, newsletter0_.subscriber_id_su as subscriber6_19_ from newsletter_subscriber newsletter0_ where newsletter0_.state_ns=? and ((select newsletter1_.date_nse from newsletter_send newsletter1_ where newsletter1_.newsletter_id_ne=? and newsletter1_.newsletter_subscriber_id_ns=newsletter0_.id_ns) is null) limit ?
Hibernate: select newsletter0_.newsletter_id_ne as newsletter1_18_0_, newsletter0_.newsletter_subscriber_id_ns as newsletter2_18_0_, newsletter0_.date_nse as date3_18_0_, newsletter0_.state_nse as state4_18_0_ from newsletter_send newsletter0_ where newsletter0_.newsletter_id_ne=? and newsletter0_.newsletter_subscriber_id_ns=?
Hibernate: select newsletter0_.newsletter_id_ne as newsletter1_18_0_, newsletter0_.newsletter_subscriber_id_ns as newsletter2_18_0_, newsletter0_.date_nse as date3_18_0_, newsletter0_.state_nse as state4_18_0_ from newsletter_send newsletter0_ where newsletter0_.newsletter_id_ne=? and newsletter0_.newsletter_subscriber_id_ns=?
Hibernate: insert into newsletter_send (date_nse, state_nse, newsletter_id_ne, newsletter_subscriber_id_ns) values (?, ?, ?, ?)
Hibernate: insert into newsletter_send (date_nse, state_nse, newsletter_id_ne, newsletter_subscriber_id_ns) values (?, ?, ?, ?)
Hibernate: update newsletter set admin_id_ad=?, created_ne=?, preferencies_ne=?, send_ne=?, state_ne=?, text_ne=?, title_ne=? where id_ne=?
Hibernate: select count(newsletter0_.newsletter_id_ne) as col_0_0_ from newsletter_send newsletter0_ inner join newsletter newsletter1_ on newsletter0_.newsletter_id_ne=newsletter1_.id_ne inner join newsletter_subscriber newsletter2_ on newsletter0_.newsletter_subscriber_id_ns=newsletter2_.id_ns where newsletter0_.state_nse=?
Hibernate: select newsletter0_.newsletter_id_ne as newsletter1_18_0_, newsletter0_.newsletter_subscriber_id_ns as newsletter2_18_0_, newsletter1_.id_ne as id1_13_1_, newsletter2_.id_ns as id1_19_2_, newsletter0_.date_nse as date3_18_0_, newsletter0_.state_nse as state4_18_0_, newsletter1_.admin_id_ad as admin8_13_1_, newsletter1_.created_ne as created2_13_1_, newsletter1_.preferencies_ne as preferen3_13_1_, newsletter1_.send_ne as send4_13_1_, newsletter1_.state_ne as state5_13_1_, newsletter1_.text_ne as text6_13_1_, newsletter1_.title_ne as title7_13_1_, newsletter2_.date_ns as date2_19_2_, newsletter2_.email_ns as email3_19_2_, newsletter2_.password_ns as password4_19_2_, newsletter2_.state_ns as state5_19_2_, newsletter2_.subscriber_id_su as subscriber6_19_2_ from newsletter_send newsletter0_ inner join newsletter newsletter1_ on newsletter0_.newsletter_id_ne=newsletter1_.id_ne inner join newsletter_subscriber newsletter2_ on newsletter0_.newsletter_subscriber_id_ns=newsletter2_.id_ns where newsletter0_.state_nse=? limit ?
Hibernate: select borrowing0_.id_bor as id1_7_0_, bookcopy1_.id_bc as id1_3_1_, subscriber2_.id_su as id1_28_2_, borrowing0_.return_alert_bor as return2_7_0_, borrowing0_.book_copy_id_bc as book7_7_0_, borrowing0_.date_bor as date3_7_0_, borrowing0_.return_bor as return4_7_0_, borrowing0_.last_action_bor as last5_7_0_, borrowing0_.penalized_bor as penalized6_7_0_, borrowing0_.subscriber_id_su as subscriber8_7_0_, bookcopy1_.book_id_bo as book5_3_1_, bookcopy1_.code_bc as code2_3_1_, bookcopy1_.condition_bc as condition3_3_1_, bookcopy1_.state_bc as state4_3_1_, subscriber2_.avatar_su as avatar2_28_2_, subscriber2_.blacklisted_su as blacklis3_28_2_, subscriber2_.booking_nb_su as booking4_28_2_, subscriber2_.confirmed_su as confirmed5_28_2_, subscriber2_.created_su as created6_28_2_, subscriber2_.email_su as email7_28_2_, subscriber2_.login_su as login8_28_2_, subscriber2_.password_su as password9_28_2_, subscriber2_.revival_su as revival10_28_2_ from borrowing borrowing0_ inner join book_copy bookcopy1_ on borrowing0_.book_copy_id_bc=bookcopy1_.id_bc inner join subscriber subscriber2_ on borrowing0_.subscriber_id_su=subscriber2_.id_su where borrowing0_.return_bor<=curdate() and bookcopy1_.state_bc=? and borrowing0_.penalized_bor=? and (borrowing0_.last_action_bor<=curdate() or borrowing0_.last_action_bor is null)
Hibernate: select count(newsletter0_.newsletter_id_ne) as col_0_0_ from newsletter_send newsletter0_ inner join newsletter newsletter1_ on newsletter0_.newsletter_id_ne=newsletter1_.id_ne inner join newsletter_subscriber newsletter2_ on newsletter0_.newsletter_subscriber_id_ns=newsletter2_.id_ns where newsletter0_.state_nse=?
------------- ---------------- ---------------
------------- Standard Error -----------------
log4j:WARN No appenders could be found for logger (org.springframework.test.context.junit4.SpringJUnit4ClassRunner).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
------------- ---------------- ---------------

Testcase: testSending took 15,574 sec
